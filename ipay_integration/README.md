## IPAY POS ODOO MODULE

### Requirements:
It's important to note that this module has only been tested on odoo 14

1. Python and Pip pre installed.
2. An installation/ working instance of postgres.
3. An installaion of odoo 14 server. You can find out how to intsall odoo [here](https://www.odoo.com/documentation/11.0/setup/install.html) for your OS or find an installation script (Linux-Debian users).
4. An installation of the Point of sale app (usually comes as part of an odoo installation)
5. Activation of developer mode for the installation

### Installing:
1. Extract the zipped file into the odoo addons folder (usually odoo12/odoo/addons on linux or c:\odoo\server\odoo\addons on windows)
    NOTE: Ensure the addons folder is listed in the odoo configuration file (usually at etc/odoo.conf) as an addons path
2. Restart the odoo intsance by runing ``` sudo systemctl restart odoo ``` or ``` sudo systemctl restart odoo12 ``` depending on how the service instance is listed on your machine on linux-Debian. On windows, open ```Services``` and search for odoo and restart the server. 
3. Open ``` localhost:8069 ``` (or check odoo logs to see what port the server started on) on your browser.
4. Go to the apps menu and select "update app list".
5. On the same menu search for the module "ipay pos" and install it.

### Configuration
1. Navigate to settings->point of sale->Payment Terminals and click on the "iPay POS" selection (if its not already selected).
2. Navigate to Point of Sale-> Configurations->iPay Configurations and add your ipay credentials and save
    NOTE: The Hook URL and Hash Key fields are autogenerated, give these details to iPay for them to process your payments. The sub account field is your paybill account number
3. Navigate to Point of Sale-> Configurations-> Payemt Methods and create a new payment method and create a new payment method. On the left hand side of the form theres an option "Use payment terminal": 
    1. select ipay as your payment method
    2. Select the iPay credentials you just created in step (2)
    3. Select (1) payment method from the given ipay options to be used for this specific method and save

### Refunds
You can find helpful instructions on how to refund products here: [refunding in odoo](https://www.youtube.com/watch?v=8g_qL6OHAjs).

The refunds can be processed by ipay via the POS by inputing a negative amount in the amount section of the POS and entering the transaction ID from the receipt in the right hand POS menu titled "Add Transaction ID". Without this, the transaction will fail.

### STK Pushes
You can use STK pushes if:
1. A number has been added in the right hand menu item titled "Add Number".
2. The payment method chosen has either Equitel or MPesa as its payment option.

    __**NOTE**: It can't be both, if both equitel and MPesa are chosen for the same payment method the module will default to MPesa__

### Other Sources:
Check odoos docummentation on [activating developer mode](https://www.odoo.com/documentation/user/14.0/general/developer_mode/activate.html) and [installation of apps](https://www.odoo.com/forum/help-1/how-to-install-a-new-module-app-in-odoo-12-community-on-windows-10-150960) for reference.